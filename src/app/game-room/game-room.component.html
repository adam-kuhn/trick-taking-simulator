<p>Welcome to the game room</p>
<p *ngIf="numberOfPlayers > 0">{{ numberOfPlayers }} Players in game</p>
<button mat-raised-button (click)="dealCards()">Deal the Cards</button>
<button mat-raised-button [disabled]="cardsInHand.length === 0" (click)="openTaskDealDialog()">Tasks</button>

<div class="game-info-container">
  <div *ngIf="numberOfPlayers">
    <app-task-selection [numberOfPlayers]="numberOfPlayers" [isPlayerCommander]="isPlayerCommander" ></app-task-selection>
  </div>

  <h3 *ngIf="winningCard">Player {{ winningCard.player }} won the last trick with the {{ winningCard.value }} {{ winningCard.suit }}</h3>
  <div class="game-info-card">
    <div class="card-info">
      <h3>Last Trick</h3>
      <div class="arranged-cards">
       <app-information-card *ngFor="let card of lastTrick" [information]="'Player ' + card.player" [card]="card"></app-information-card>
      </div>
    </div>
    <div class="card-info">
      <h3>Communication</h3>
      <div class="arranged-cards">
        <app-information-card *ngFor="let communication of revealedCommunications" [information]="communication.type" [card]="communication.card"></app-information-card>
      </div>
    </div>
  </div>
  <h4>Lead Card:</h4>
  <app-playing-card *ngIf="leadCard" [card]="leadCard"></app-playing-card>
</div>

<div 
  class="playing-mat arranged-cards"
  cdkDropList 
  #playingMat="cdkDropList" 
  [cdkDropListData]="playedCards"
  (cdkDropListDropped)="cardPlayed($event)">
    <app-playing-card *ngFor="let card of playedCards" [card]="card"></app-playing-card>
</div>

<h3 *ngIf="player !== 0">Player {{ player }}'s hand</h3>
<div class="players-cards">
  <div
    cdkDropList
    #playersHand="cdkDropList" 
    [cdkDropListData]="cardsInHand"
    [cdkDropListConnectedTo]="[playingMat, communication]"
    (cdkDropListDropped)="handleDrop($event)"
  >
    <div class="arranged-cards">
      <app-playing-card *ngFor="let card of cardsInHand" cdkDrag [card]="card"></app-playing-card>
    </div>
  </div>

  <div>
    <h3>Communicate</h3>
    <div
      class="communication-area"
      #communication="cdkDropList" 
      cdkDropList
      [cdkDropListData]="communicationCard" 
      [cdkDropListConnectedTo]="[playingMat, playersHand]"
      (cdkDropListDropped)="cardPlacedInCommunication($event)"
      color="secondary"
    >
      <div *ngIf="communicationCard[0]">
        <mat-select (selectionChange)="handleCommunication($event)">
          <mat-option *ngFor="let option of communicationOptions" [value]="option">
            {{ option }}
          </mat-option>
        </mat-select>
        <app-playing-card cdkDrag [card]="communicationCard[0]"></app-playing-card>
      </div>
    </div>
  </div>
</div>

